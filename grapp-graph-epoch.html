 
<!--
Copyright (c) 2014-2015 Dirk Grappendorf, www.grappendorf.net. All rights reserved.
This code may only be used under the MIT style license found in the file LICENSE.txt.

Element: grapp-graph-epoch
Version: 0.0.2
Description: A web component that displays Epoch graphs
-->


<link href="../polymer/polymer.html" rel="import">
<link href="grapp-graph-epoch-series.html" rel="import">

<polymer-element name="grapp-graph-epoch" attributes="type axis theme width height">

  <template>

    <link rel="stylesheet" type="text/css" href="../epoch/epoch.min.css">

    <div class="epoch-theme-{{theme}}">
      <div id="graph" class="epoch category10" style="width: {{width}}; height: {{height}}"></div>
    </div>

  </template>

  <script src="../d3/d3.min.js"></script>
  <script src="../epoch/epoch.min.js"></script>

<script type="text/javascript">(function() {
  var slice = [].slice;

  Polymer('grapp-graph-epoch', {
    created: function() {
      this.axis = [];
      this.theme = 'default';
      this.width = "320px";
      return this.height = "160px";
    },
    ready: function() {
      var s;
      this.data = (function() {
        var i, len, ref, results;
        ref = this.querySelectorAll('grapp-graph-epoch-series');
        results = [];
        for (i = 0, len = ref.length; i < len; i++) {
          s = ref[i];
          results.push(this.createData(s));
        }
        return results;
      }).call(this);
      return this.draw();
    },
    createData: function(series) {
      return {
        label: series.label,
        values: series.data
      };
    },
    axisChanged: function() {
      return this.graph.option('axis', this.axis);
    },
    draw: function() {
      var options;
      this.$.graph.innerHTML = '';
      options = {
        el: this.$.graph,
        data: this.data,
        axes: this.axis
      };
      this.graph = new Epoch._typeMap[this.type](options);
      return this.graph.draw();
    },
    push: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    }
  });

}).call(this);
</script>

</polymer-element>
